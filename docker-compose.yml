version: '3.8'

services:
  bookarr:
    build: .
    container_name: bookarr
    ports:
      - "2665:2665"
    environment:
      # User/Group IDs (LinuxServer.io standard)
      - PUID=1024
      - PGID=100
      - TZ=America/New_York
      
      # Database configuration
      - DATABASE_URL=file:/config/bookarr.db
      
      # NextAuth (NEXTAUTH_SECRET will be auto-generated if not provided)
      - NEXTAUTH_URL=http://localhost:2665
      
      # Application Settings
      - DEFAULT_LANGUAGE=en
      - DEFAULT_TIMEZONE=UTC
      
      # Features
      - ENABLE_API_KEYS=true
      - ENABLE_DOWNLOADS=true
    volumes:
      - ./data:/config # Local config storage (database, settings)
      - ./data/books:/books # Local books library for development
      - ./data/downloads:/downloads # Local download directory for development
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:2665/api/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s
