version: '3.8'

services:
  bookarr:
    image: bookarr:latest
    container_name: bookarr
    ports:
      - "2665:2665"
    environment:
      # User/Group IDs (LinuxServer.io standard)
      - PUID=1000
      - PGID=1000
      - TZ=UTC
      
      # Database (SQLite - no separate database needed!)
      - DATABASE_URL=file:/app/data/bookarr.db
      
      # NextAuth (NEXTAUTH_SECRET will be auto-generated if not provided)
      - NEXTAUTH_URL=http://localhost:2665
      
      # API Keys are configured in the app settings, not as environment variables
      
      # Download clients and indexers are configured in the app settings
      
      # File Management
      - BOOKS_LIBRARY_PATH=/app/data/books
      - DOWNLOADS_PATH=/app/data/downloads
      - TEMP_PATH=/tmp/bookarr
      
      # Application Settings
      - DEFAULT_LANGUAGE=en
      - DEFAULT_TIMEZONE=UTC
      
      # Features
      - ENABLE_API_KEYS=true
      - ENABLE_DOWNLOADS=true
    volumes:
      - bookarr_data:/app/data
      - bookarr_temp:/tmp/bookarr
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:2665/api/health"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 40s

volumes:
  bookarr_data:
  bookarr_temp:
